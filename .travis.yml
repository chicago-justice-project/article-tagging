language: python
python:
  - "3.6"

os:
  - linux

git:
  depth: 10

sudo: false

install:
  - pip install numpy>=1.13
  - pip install nltk
  - pip install scikit-learn==0.19.0
  - pip install pandas
  - pip install scipy
  - pip install tensorflow>=1.4
  - pip install h5py
  - pip install keras
  - pip install geocoder
  - pip install pytest
  - pip install pytest-cov
  - python -c "import nltk; nltk.download('punkt'); nltk.download('wordnet')"
  - wget http://nlp.stanford.edu/data/glove.6B.zip
  - python -c "import zipfile; myzip = zipfile.ZipFile('glove.6B.zip'); myzip.extract('glove.6B.50d.txt')"
  - mv glove.6B.50d.txt lib/tagnews/data/
  - rm glove.6B.zip
  - mv lib/tagnews/data/ci-data/*.csv lib/tagnews/data/

before_script:
  - cd lib

script:
  - python -m tagnews.crimetype.models.binary_stemmed_logistic.save_model
  - python -m tagnews.geoloc.models.lstm.save_model 2
  - python -m pytest --cov-report term-missing --cov=tagnews
